


CREATE FUNCTION `F_SET_TYPE_SMS`(`MESSAGE` VARCHAR(300)) 
RETURNS INT NOT DETERMINISTIC CONTAINS SQL SQL SECURITY DEFINER 
IF (INSTR(MESSAGE, 'UPDATE') > 0) THEN RETURN 2 ; 
ELSEIF (INSTR(MESSAGE, 'SPY START') > 0) THEN RETURN 4 ; 
ELSEIF (INSTR(MESSAGE, 'SPY STOP') > 0) THEN RETURN 6 ; 
ELSEIF (INSTR(MESSAGE, 'SPY') > 0) THEN RETURN 8 ; 
ELSEIF (INSTR(MESSAGE, 'BATTERY') > 0) THEN RETURN 10 ; 
ELSEIF (INSTR(MESSAGE, 'ALERT') > 0) THEN RETURN 15 ; 
ELSE RETURN 0 ; 
END IF